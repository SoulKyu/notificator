// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.906
package scripts

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

func DashboardUtilities() templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<script>\n\t\twindow.dashboardUtilitiesMixin = {\n\t\t\tupdateURL() {\n\t\t\t\tconst params = new URLSearchParams();\n\t\t\t\t\n\t\t\t\tif (this.searchQuery) params.set('search', this.searchQuery);\n\t\t\t\tif (this.filters.alertmanagers.length > 0) params.set('alertmanagers', this.filters.alertmanagers.join(','));\n\t\t\t\tif (this.filters.severities.length > 0) params.set('severities', this.filters.severities.join(','));\n\t\t\t\tif (this.filters.statuses.length > 0) params.set('statuses', this.filters.statuses.join(','));\n\t\t\t\tif (this.filters.teams.length > 0) params.set('teams', this.filters.teams.join(','));\n\t\t\t\tif (this.filters.alertNames && this.filters.alertNames.length > 0) params.set('alertNames', this.filters.alertNames.join(','));\n\t\t\t\tif (this.displayMode !== 'classic') params.set('displayMode', this.displayMode);\n\t\t\t\tif (this.viewMode !== 'list') params.set('viewMode', this.viewMode);\n\t\t\t\tif (this.sortField !== 'duration') params.set('sortField', this.sortField);\n\t\t\t\tif (this.sortDirection !== 'asc') params.set('sortDirection', this.sortDirection);\n\t\t\t\tif (this.acknowledgmentFilter) params.set('acknowledged', this.acknowledgmentFilter);\n\t\t\t\tif (this.commentsFilter) params.set('hasComments', this.commentsFilter);\n\t\t\t\t\n\t\t\t\tconst queryString = params.toString();\n\t\t\t\tconst newURL = queryString ? `${window.location.pathname}?${queryString}` : window.location.pathname;\n\t\t\t\t\n\t\t\t\tif (window.location.href !== window.location.origin + newURL) {\n\t\t\t\t\twindow.history.replaceState({}, '', newURL);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tloadFiltersFromURL() {\n\t\t\t\tconst params = new URLSearchParams(window.location.search);\n\t\t\t\t\n\t\t\t\tthis.searchQuery = params.get('search') || '';\n\t\t\t\tthis.filters.alertmanagers = params.get('alertmanagers') ? params.get('alertmanagers').split(',') : [];\n\t\t\t\tthis.filters.severities = params.get('severities') ? params.get('severities').split(',') : [];\n\t\t\t\tthis.filters.statuses = params.get('statuses') ? params.get('statuses').split(',') : [];\n\t\t\t\tthis.filters.teams = params.get('teams') ? params.get('teams').split(',') : [];\n\t\t\t\tthis.filters.alertNames = params.get('alertNames') ? params.get('alertNames').split(',') : [];\n\t\t\t\tthis.displayMode = params.get('displayMode') || 'classic';\n\t\t\t\tthis.viewMode = params.get('viewMode') || 'list';\n\t\t\t\tthis.sortField = params.get('sortField') || 'duration';\n\t\t\t\tthis.sortDirection = params.get('sortDirection') || 'asc';\n\t\t\t\tthis.acknowledgmentFilter = params.get('acknowledged') || null;\n\t\t\t\tthis.commentsFilter = params.get('hasComments') || null;\n\t\t\t},\n\n\t\t\tcheckAlertFromURL() {\n\t\t\t\t// Check if URL contains an alert ID and open modal\n\t\t\t\tconst pathParts = window.location.pathname.split('/');\n\t\t\t\tif (pathParts.length >= 4 && pathParts[1] === 'dashboard' && pathParts[2] === 'alert') {\n\t\t\t\t\tconst alertId = pathParts[3];\n\t\t\t\t\tif (alertId) {\n\t\t\t\t\t\t// Wait a bit for initial data to load, then show alert details\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.showAlertDetails(alertId);\n\t\t\t\t\t\t}, 500);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcopyToClipboard(text) {\n\t\t\t\tif (navigator.clipboard) {\n\t\t\t\t\tnavigator.clipboard.writeText(text).then(() => {\n\t\t\t\t\t\tconsole.log('Copied to clipboard')\n\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\tconsole.error('Failed to copy to clipboard')\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconst textArea = document.createElement('textarea');\n\t\t\t\t\ttextArea.value = text;\n\t\t\t\t\tdocument.body.appendChild(textArea);\n\t\t\t\t\ttextArea.select();\n\t\t\t\t\ttry {\n\t\t\t\t\t\tdocument.execCommand('copy');\n\t\t\t\t\t\tconsole.log('Copied to clipboard')\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tconsole.log('Failed to copy to clipboard')\n\t\t\t\t\t}\n\t\t\t\t\tdocument.body.removeChild(textArea);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Filtering utilities\n\t\t\tapplyFilters() {\n\t\t\t\t// Debounced filter application happens automatically via data loading\n\t\t\t\tthis.loadDashboardData();\n\t\t\t},\n\n\t\t\tclearAllFilters() {\n\t\t\t\tthis.searchQuery = '';\n\t\t\t\tthis.filters = {\n\t\t\t\t\talertmanagers: [],\n\t\t\t\t\tseverities: [],\n\t\t\t\t\tstatuses: [],\n\t\t\t\t\tteams: [],\n\t\t\t\t\talertNames: []\n\t\t\t\t};\n\t\t\t\tthis.acknowledgmentFilter = null;\n\t\t\t\tthis.commentsFilter = null;\n\t\t\t\tthis.activePresetName = null; // Clear active preset indicator\n\t\t\t\tthis.loadDashboardData();\n\t\t\t},\n\n\t\t\tclearFilter(filterType) {\n\t\t\t\tthis.filters[filterType] = [];\n\t\t\t\tthis.applyFilters();\n\t\t\t},\n\n\t\t\tremoveFilter(filterType, value) {\n\t\t\t\tconst index = this.filters[filterType].indexOf(value);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tthis.filters[filterType].splice(index, 1);\n\t\t\t\t\tthis.applyFilters();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\thasActiveFilters() {\n\t\t\t\treturn this.searchQuery.length > 0 ||\n\t\t\t\t\t   this.filters.alertmanagers.length > 0 ||\n\t\t\t\t\t   this.filters.severities.length > 0 ||\n\t\t\t\t\t   this.filters.statuses.length > 0 ||\n\t\t\t\t\t   this.filters.teams.length > 0 ||\n\t\t\t\t\t   this.filters.alertNames.length > 0 ||\n\t\t\t\t\t   this.acknowledgmentFilter !== null ||\n\t\t\t\t\t   this.commentsFilter !== null;\n\t\t\t},\n\n\t\t\t// Selection management\n\t\t\ttoggleAlert(fingerprint) {\n\t\t\t\tconst index = this.selectedAlerts.indexOf(fingerprint);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tthis.selectedAlerts.splice(index, 1);\n\t\t\t\t} else {\n\t\t\t\t\tthis.selectedAlerts.push(fingerprint);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\ttoggleGroup(groupName) {\n\t\t\t\tconst index = this.selectedGroups.indexOf(groupName);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tthis.selectedGroups.splice(index, 1);\n\t\t\t\t} else {\n\t\t\t\t\tthis.selectedGroups.push(groupName);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tselectAll() {\n\t\t\t\tif (this.viewMode === 'list') {\n\t\t\t\t\tthis.selectedAlerts = this.alerts.map(a => a.fingerprint);\n\t\t\t\t} else {\n\t\t\t\t\tthis.selectedGroups = this.groups.map(g => g.groupName);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tclearSelection() {\n\t\t\t\tthis.selectedAlerts = [];\n\t\t\t\tthis.selectedGroups = [];\n\t\t\t},\n\n\t\t\ttoggleSelectAll(event) {\n\t\t\t\tif (event.target.checked) {\n\t\t\t\t\tthis.selectAll();\n\t\t\t\t} else {\n\t\t\t\t\tthis.clearSelection();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Group expansion\n\t\t\ttoggleGroupExpanded(groupName) {\n\t\t\t\tconst index = this.expandedGroups.indexOf(groupName);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tthis.expandedGroups.splice(index, 1);\n\t\t\t\t} else {\n\t\t\t\t\tthis.expandedGroups.push(groupName);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Sorting\n\t\t\tsortBy(field) {\n\t\t\t\tif (this.sortField === field) {\n\t\t\t\t\tthis.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';\n\t\t\t\t} else {\n\t\t\t\t\tthis.sortField = field;\n\t\t\t\t\tthis.sortDirection = 'asc';\n\t\t\t\t}\n\t\t\t\tthis.loadDashboardData();\n\t\t\t},\n\n\t\t\t// Settings management\n\t\t\tloadSettings() {\n\t\t\t\tconst saved = localStorage.getItem('dashboardSettings');\n\t\t\t\tif (saved) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst settings = JSON.parse(saved);\n\t\t\t\t\t\tthis.settings = { ...this.settings, ...settings };\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.warn('Failed to parse saved settings:', e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.applyTheme();\n\t\t\t},\n\n\t\t\tasync saveSettings() {\n\t\t\t\ttry {\n\t\t\t\t\t// Get the settings modal instance to check active tab\n\t\t\t\t\tconst settingsModal = window.currentSettingsModal;\n\n\t\t\t\t\t// Check which tab is active and save appropriate settings\n\t\t\t\t\tif (settingsModal && settingsModal.activeTab === 'colors') {\n\t\t\t\t\t\t// Save color preferences\n\t\t\t\t\t\tconst success = await settingsModal.saveColorPreferences();\n\t\t\t\t\t\tif (success) {\n\t\t\t\t\t\t\tthis.showSettings = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (settingsModal && settingsModal.activeTab === 'notifications') {\n\t\t\t\t\t\t// Save notification preferences\n\t\t\t\t\t\tconst success = await settingsModal.saveNotificationPreferences();\n\t\t\t\t\t\tif (success) {\n\t\t\t\t\t\t\tthis.showSettings = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Otherwise, save general settings\n\t\t\t\t\tconst settingsResponse = await fetch('/api/v1/dashboard/settings', {\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\tcredentials: 'include',\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbody: JSON.stringify(this.settings)\n\t\t\t\t\t});\n\n\t\t\t\t\tconst settingsResult = await settingsResponse.json();\n\t\t\t\t\t\n\t\t\t\t\tif (!settingsResult.success) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Save to localStorage as well\n\t\t\t\t\tlocalStorage.setItem('dashboardSettings', JSON.stringify(this.settings));\n\n\t\t\t\t\t// Apply theme change\n\t\t\t\t\tthis.applyTheme();\n\n\t\t\t\t\tthis.showSettings = false;\n\t\t\t\t\t\n\t\t\t\t\t// Apply theme change\n\t\t\t\t\tthis.applyTheme();\n\t\t\t\t\t\n\t\t\t\t\t// Restart auto-refresh with new interval\n\t\t\t\t\tthis.startAutoRefresh();\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('Error saving settings:', error);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tapplyTheme() {\n\t\t\t\tconst isDark = this.settings.theme === 'dark';\n\t\t\t\tdocument.documentElement.classList.toggle('dark', isDark);\n\n\t\t\t\t// Update meta theme-color for mobile browsers\n\t\t\t\tconst metaThemeColor = document.querySelector('meta[name=\"theme-color\"]');\n\t\t\t\tif (metaThemeColor) {\n\t\t\t\t\tmetaThemeColor.setAttribute('content', isDark ? '#1f2937' : '#ffffff');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Current user management\n\t\t\tasync loadCurrentUser() {\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await fetch('/api/v1/auth/profile', {\n\t\t\t\t\t\tcredentials: 'include'\n\t\t\t\t\t});\n\t\t\t\t\tif (response.ok) {\n\t\t\t\t\t\tconst result = await response.json();\n\t\t\t\t\t\tif (result.success && result.data) {\n\t\t\t\t\t\t\tthis.currentUser = {\n\t\t\t\t\t\t\t\tid: result.data.id,\n\t\t\t\t\t\t\t\tusername: result.data.username,\n\t\t\t\t\t\t\t\temail: result.data.email\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t// Initialize notification service with user ID\n\t\t\t\t\t\t\tif (window.notificationService) {\n\t\t\t\t\t\t\t\tawait window.notificationService.init(this.currentUser.id);\n\t\t\t\t\t\t\t\tconsole.log('Notification service initialized for user:', this.currentUser.id);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.warn('Failed to load current user:', error);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tasync loadAnnotationButtonConfigs() {\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await fetch('/api/v1/dashboard/annotation-buttons', {\n\t\t\t\t\t\tcredentials: 'include'\n\t\t\t\t\t});\n\t\t\t\t\tif (response.ok) {\n\t\t\t\t\t\tconst result = await response.json();\n\t\t\t\t\t\tif (result.success && result.data && result.data.configs) {\n\t\t\t\t\t\t\t// Sanitize colors when loading to ensure safety\n\t\t\t\t\t\t\tthis.annotationButtonConfigs = result.data.configs.map(config => ({\n\t\t\t\t\t\t\t\t...config,\n\t\t\t\t\t\t\t\tcolor: this.sanitizeColor(config.color)\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\tconsole.log('Loaded annotation button configs:', this.annotationButtonConfigs.length);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.warn('Failed to load annotation button configs:', error);\n\t\t\t\t\t// Use default configs if loading fails\n\t\t\t\t\tthis.annotationButtonConfigs = [];\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Color sanitization for security\n\t\t\tsanitizeColor(color) {\n\t\t\t\tconst hexColorRegex = /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;\n\t\t\t\tif (hexColorRegex.test(color)) {\n\t\t\t\t\treturn color;\n\t\t\t\t}\n\t\t\t\treturn '#6366f1'; // Default indigo-600\n\t\t\t},\n\n\t\t\tgetCurrentUser() {\n\t\t\t\treturn this.currentUser;\n\t\t\t},\n\n\t\t\tgetUserInitials() {\n\t\t\t\tconst currentUser = this.getCurrentUser();\n\t\t\t\tif (!currentUser || !currentUser.username) {\n\t\t\t\t\treturn 'U'; // Fallback to 'U' if no user data\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst username = currentUser.username.trim();\n\t\t\t\tif (username.length === 0) {\n\t\t\t\t\treturn 'U';\n\t\t\t\t} else if (username.length === 1) {\n\t\t\t\t\treturn username.toUpperCase();\n\t\t\t\t} else {\n\t\t\t\t\t// Get first 2 characters and convert to uppercase\n\t\t\t\t\treturn username.substring(0, 2).toUpperCase();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcanDeleteComment(comment) {\n\t\t\t\tconst currentUser = this.getCurrentUser();\n\t\t\t\treturn currentUser && comment && (\n\t\t\t\t\tcurrentUser.id === comment.userId || \n\t\t\t\t\tcurrentUser.username === comment.username\n\t\t\t\t);\n\t\t\t},\n\n\t\t\t// Column resizing utilities\n\t\t\tloadColumnWidths() {\n\t\t\t\tconst saved = localStorage.getItem('dashboardColumnWidths');\n\t\t\t\tif (saved) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst widths = JSON.parse(saved);\n\t\t\t\t\t\tthis.columnWidths = { ...this.columnWidths, ...widths };\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.warn('Failed to parse saved column widths:', e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsaveColumnWidths() {\n\t\t\t\tlocalStorage.setItem('dashboardColumnWidths', JSON.stringify(this.columnWidths));\n\t\t\t},\n\n\t\t\tstartResize(event, column) {\n\t\t\t\tthis.isResizing = true;\n\t\t\t\tthis.currentColumn = column;\n\t\t\t\tthis.startX = event.clientX;\n\t\t\t\tthis.startWidth = this.columnWidths[column];\n\t\t\t\t\n\t\t\t\tevent.preventDefault();\n\t\t\t\tdocument.body.style.cursor = 'col-resize';\n\t\t\t\tdocument.body.style.userSelect = 'none';\n\t\t\t},\n\n\t\t\thandleMouseMove(event) {\n\t\t\t\tif (!this.isResizing || !this.currentColumn) return;\n\t\t\t\t\n\t\t\t\tconst diff = event.clientX - this.startX;\n\t\t\t\tconst newWidth = Math.max(50, this.startWidth + diff); // Minimum width of 50px\n\t\t\t\tthis.columnWidths[this.currentColumn] = newWidth;\n\t\t\t},\n\n\t\t\thandleMouseUp() {\n\t\t\t\tif (this.isResizing) {\n\t\t\t\t\tthis.isResizing = false;\n\t\t\t\t\tthis.currentColumn = null;\n\t\t\t\t\tthis.saveColumnWidths();\n\t\t\t\t\t\n\t\t\t\t\tdocument.body.style.cursor = '';\n\t\t\t\t\tdocument.body.style.userSelect = '';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tresetColumnWidths() {\n\t\t\t\t// Reset to default widths\n\t\t\t\tthis.columnWidths = {\n\t\t\t\t\talertName: 300,\n\t\t\t\t\tacknowledge: 75,\n\t\t\t\t\tinstance: 350,\n\t\t\t\t\tseverity: 150,\n\t\t\t\t\tstatus: 150,\n\t\t\t\t\tcomments: 130,\n\t\t\t\t\tteam: 200,\n\t\t\t\t\tsummary: 400,\n\t\t\t\t\tduration: 150,\n\t\t\t\t\tsource: 180\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// Clear saved widths\n\t\t\t\tlocalStorage.removeItem('dashboardColumnWidths');\n\t\t\t},\n\n\t\t\t// Format utilities\n\t\t\tformatDuration(seconds) {\n\t\t\t\tif (seconds < 60) {\n\t\t\t\t\treturn `${Math.floor(seconds)}s`;\n\t\t\t\t} else if (seconds < 3600) {\n\t\t\t\t\tconst minutes = Math.floor(seconds / 60);\n\t\t\t\t\tconst remainingSeconds = Math.floor(seconds % 60);\n\t\t\t\t\treturn `${minutes}m ${remainingSeconds}s`;\n\t\t\t\t} else if (seconds < 86400) { // Less than 24 hours\n\t\t\t\t\tconst hours = Math.floor(seconds / 3600);\n\t\t\t\t\tconst remainingMinutes = Math.floor((seconds % 3600) / 60);\n\t\t\t\t\treturn `${hours}h ${remainingMinutes}m`;\n\t\t\t\t} else { // 24 hours or more - show days and hours\n\t\t\t\t\tconst days = Math.floor(seconds / 86400);\n\t\t\t\t\tconst remainingHours = Math.floor((seconds % 86400) / 3600);\n\t\t\t\t\tif (remainingHours > 0) {\n\t\t\t\t\t\treturn `${days}d ${remainingHours}h`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn `${days}d`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tformatTimestamp(timestamp) {\n\t\t\t\treturn new Date(timestamp).toLocaleString();\n\t\t\t},\n\t\t\t\n\t\t\t// Pagination utilities\n\t\t\tgetTotalPages() {\n\t\t\t\treturn Math.ceil(this.totalItems / this.itemsPerPage);\n\t\t\t},\n\t\t\t\n\t\t\tgetPaginationStartIndex() {\n\t\t\t\tif (this.totalItems === 0) return 0;\n\t\t\t\treturn ((this.currentPage - 1) * this.itemsPerPage) + 1;\n\t\t\t},\n\t\t\t\n\t\t\tgetPaginationEndIndex() {\n\t\t\t\tconst end = this.currentPage * this.itemsPerPage;\n\t\t\t\treturn end > this.totalItems ? this.totalItems : end;\n\t\t\t},\n\t\t\t\n\t\t\tgetPageNumbers() {\n\t\t\t\tconst totalPages = this.getTotalPages();\n\t\t\t\tconst pages = [];\n\t\t\t\t\n\t\t\t\tif (totalPages <= 7) {\n\t\t\t\t\t// Show all pages if 7 or less\n\t\t\t\t\tfor (let i = 1; i <= totalPages; i++) {\n\t\t\t\t\t\tpages.push(i);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Show first, last, and pages around current\n\t\t\t\t\tif (this.currentPage <= 3) {\n\t\t\t\t\t\tfor (let i = 1; i <= 5; i++) {\n\t\t\t\t\t\t\tpages.push(i);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpages.push('...');\n\t\t\t\t\t\tpages.push(totalPages);\n\t\t\t\t\t} else if (this.currentPage >= totalPages - 2) {\n\t\t\t\t\t\tpages.push(1);\n\t\t\t\t\t\tpages.push('...');\n\t\t\t\t\t\tfor (let i = totalPages - 4; i <= totalPages; i++) {\n\t\t\t\t\t\t\tpages.push(i);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpages.push(1);\n\t\t\t\t\t\tpages.push('...');\n\t\t\t\t\t\tfor (let i = this.currentPage - 1; i <= this.currentPage + 1; i++) {\n\t\t\t\t\t\t\tpages.push(i);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpages.push('...');\n\t\t\t\t\t\tpages.push(totalPages);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn pages;\n\t\t\t},\n\t\t\t\n\t\t\tsetItemsPerPage(value) {\n\t\t\t\tthis.itemsPerPage = parseInt(value);\n\t\t\t\tthis.currentPage = 1; // Reset to first page\n\t\t\t\tthis.loadDashboardData();\n\t\t\t},\n\t\t\t\n\t\t\tgoToPage(page) {\n\t\t\t\tif (page !== '...' && page !== this.currentPage) {\n\t\t\t\t\tthis.currentPage = page;\n\t\t\t\t\tthis.loadDashboardData();\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\tnextPage() {\n\t\t\t\tif (this.currentPage < this.getTotalPages()) {\n\t\t\t\t\tthis.currentPage++;\n\t\t\t\t\tthis.loadDashboardData();\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\tpreviousPage() {\n\t\t\t\tif (this.currentPage > 1) {\n\t\t\t\t\tthis.currentPage--;\n\t\t\t\t\tthis.loadDashboardData();\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// Group-by selector\n\t\t\tsetGroupByLabel(label) {\n\t\t\t\tthis.groupByLabel = label;\n\t\t\t\tthis.loadDashboardData();\n\t\t\t},\n\n\t\t\t// Alert color utilities\n\t\t\tgetAlertColor(alert, colorType = 'backgroundColor') {\n\t\t\t\tconst fingerprint = alert.fingerprint;\n\t\t\t\tif (this.alertColors[fingerprint]) {\n\t\t\t\t\tconst colorResult = this.alertColors[fingerprint];\n\t\t\t\t\tswitch (colorType) {\n\t\t\t\t\t\tcase 'backgroundColor': return colorResult.backgroundColor;\n\t\t\t\t\t\tcase 'textColor': return colorResult.textColor;\n\t\t\t\t\t\tcase 'borderColor': return colorResult.borderColor;\n\t\t\t\t\t\tcase 'badgeColor': return colorResult.badgeColor;\n\t\t\t\t\t\tdefault: return colorResult.backgroundColor;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Fallback to default severity colors\n\t\t\t\treturn this.getDefaultSeverityColor(alert, colorType);\n\t\t\t},\n\n\t\t\t// Get default severity color (fallback)\n\t\t\tgetDefaultSeverityColor(alert, colorType = 'backgroundColor') {\n\t\t\t\tconst severity = alert.severity || 'default';\n\t\t\t\tconst colorMap = {\n\t\t\t\t\tcritical: {\n\t\t\t\t\t\tbackgroundColor: '#fee2e2', // red-100\n\t\t\t\t\t\ttextColor: '#991b1b',       // red-800\n\t\t\t\t\t\tborderColor: '#dc2626',     // red-600\n\t\t\t\t\t\tbadgeColor: '#dc2626'       // red-600\n\t\t\t\t\t},\n\t\t\t\t\t'critical-daytime': {\n\t\t\t\t\t\tbackgroundColor: '#ffe4e6', // rose-100\n\t\t\t\t\t\ttextColor: '#9f1239',       // rose-800\n\t\t\t\t\t\tborderColor: '#be123c',     // rose-700\n\t\t\t\t\t\tbadgeColor: '#be123c'       // rose-700\n\t\t\t\t\t},\n\t\t\t\t\twarning: {\n\t\t\t\t\t\tbackgroundColor: '#fef3c7', // amber-100\n\t\t\t\t\t\ttextColor: '#92400e',       // amber-800\n\t\t\t\t\t\tborderColor: '#d97706',     // amber-600\n\t\t\t\t\t\tbadgeColor: '#d97706'       // amber-600\n\t\t\t\t\t},\n\t\t\t\t\tinfo: {\n\t\t\t\t\t\tbackgroundColor: '#dbeafe', // blue-100\n\t\t\t\t\t\ttextColor: '#1e40af',       // blue-800\n\t\t\t\t\t\tborderColor: '#2563eb',     // blue-600\n\t\t\t\t\t\tbadgeColor: '#2563eb'       // blue-600\n\t\t\t\t\t},\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\tbackgroundColor: '#f3f4f6', // gray-100\n\t\t\t\t\t\ttextColor: '#374151',       // gray-700\n\t\t\t\t\t\tborderColor: '#6b7280',     // gray-500\n\t\t\t\t\t\tbadgeColor: '#6b7280'       // gray-500\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tconst colors = colorMap[severity] || colorMap.default;\n\t\t\t\treturn colors[colorType] || colors.backgroundColor;\n\t\t\t},\n\n\t\t\tgetAlertBgColor(alert) {\n\t\t\t\tif (!alert || !alert.fingerprint) return '';\n\t\t\t\t\n\t\t\t\tconst colorData = this.alertColors[alert.fingerprint];\n\t\t\t\tif (!colorData || !colorData.bgColor) return '';\n\t\t\t\t\n\t\t\t\treturn `background-color: ${colorData.bgColor}; color: ${colorData.textColor || '#000000'};`;\n\t\t\t},\n\n\t\t\tgetAlertTextColor(alert) {\n\t\t\t\tif (!alert || !alert.fingerprint) return '';\n\n\t\t\t\tconst colorData = this.alertColors[alert.fingerprint];\n\t\t\t\tif (!colorData || !colorData.textColor) return '';\n\n\t\t\t\treturn colorData.textColor;\n\t\t\t},\n\n\t\t\tinitializeColumns() {\n\t\t\t\t// Try to get columns from current filter preset\n\t\t\t\tconst currentPreset = this.filterPresets && this.filterPresets.length > 0\n\t\t\t\t\t? this.filterPresets.find(p => p.is_default) || this.filterPresets[0]\n\t\t\t\t\t: null;\n\n\t\t\t\tif (currentPreset && currentPreset.column_configs && currentPreset.column_configs.length > 0) {\n\t\t\t\t\tthis.columns = currentPreset.column_configs;\n\t\t\t\t\tconsole.log('Loaded columns from preset:', currentPreset.name);\n\t\t\t\t} else {\n\t\t\t\t\t// Use default column configuration\n\t\t\t\t\tthis.columns = this.getDefaultColumns();\n\t\t\t\t\tconsole.log('Using default column configuration');\n\t\t\t\t}\n\n\t\t\t\tthis.updateVisibleColumns();\n\t\t\t},\n\n\t\t\tupdateVisibleColumns() {\n\t\t\t\tthis.visibleColumns = this.columns\n\t\t\t\t\t.filter(col => col.visible)\n\t\t\t\t\t.sort((a, b) => a.order - b.order);\n\t\t\t},\n\n\t\t\tgetDefaultColumns() {\n\t\t\t\treturn [\n\t\t\t\t\t{id: \"col_select\", label: \"\", field_type: \"system\", field_path: \"select\", formatter: \"checkbox\", width: 50, sortable: false, visible: true, order: 0, resizable: false, critical: true},\n\t\t\t\t\t{id: \"col_alertname\", label: \"Alert Name\", field_type: \"system\", field_path: \"alertName\", formatter: \"text\", width: 300, sortable: true, visible: true, order: 1, resizable: true, critical: true},\n\t\t\t\t\t{id: \"col_actions\", label: \"Actions\", field_type: \"system\", field_path: \"actions\", formatter: \"actions\", width: 100, sortable: false, visible: true, order: 2, resizable: false, critical: true},\n\t\t\t\t\t{id: \"col_instance\", label: \"Instance\", field_type: \"system\", field_path: \"instance\", formatter: \"text\", width: 350, sortable: true, visible: true, order: 3, resizable: true, critical: false},\n\t\t\t\t\t{id: \"col_severity\", label: \"Severity\", field_type: \"system\", field_path: \"severity\", formatter: \"badge\", width: 150, sortable: true, visible: true, order: 4, resizable: true, critical: false},\n\t\t\t\t\t{id: \"col_status\", label: \"Status\", field_type: \"system\", field_path: \"status\", formatter: \"badge\", width: 150, sortable: true, visible: true, order: 5, resizable: true, critical: false},\n\t\t\t\t\t{id: \"col_comments\", label: \"Comments\", field_type: \"system\", field_path: \"commentCount\", formatter: \"count\", width: 130, sortable: false, visible: true, order: 6, resizable: true, critical: false},\n\t\t\t\t\t{id: \"col_team\", label: \"Team\", field_type: \"system\", field_path: \"team\", formatter: \"text\", width: 200, sortable: true, visible: true, order: 7, resizable: true, critical: false},\n\t\t\t\t\t{id: \"col_summary\", label: \"Summary\", field_type: \"system\", field_path: \"summary\", formatter: \"text\", width: 400, sortable: false, visible: true, order: 8, resizable: true, critical: false},\n\t\t\t\t\t{id: \"col_duration\", label: \"Duration\", field_type: \"system\", field_path: \"duration\", formatter: \"duration\", width: 150, sortable: true, visible: true, order: 9, resizable: true, critical: false},\n\t\t\t\t\t{id: \"col_source\", label: \"Alertmanager\", field_type: \"system\", field_path: \"source\", formatter: \"text\", width: 180, sortable: true, visible: true, order: 10, resizable: true, critical: false},\n\t\t\t\t];\n\t\t\t},\n\n\t\t\trenderCell(alert, column) {\n\t\t\t\tconst value = this.getFieldValue(alert, column.field_path);\n\n\t\t\t\tswitch(column.formatter) {\n\t\t\t\t\tcase 'checkbox':\n\t\t\t\t\t\treturn this.renderCheckbox(alert);\n\t\t\t\t\tcase 'text':\n\t\t\t\t\t\treturn this.renderText(value);\n\t\t\t\t\tcase 'badge':\n\t\t\t\t\t\treturn this.renderBadge(value, column.field_path);\n\t\t\t\t\tcase 'duration':\n\t\t\t\t\t\treturn this.renderDuration(value);\n\t\t\t\t\tcase 'timestamp':\n\t\t\t\t\t\treturn this.renderTimestamp(value);\n\t\t\t\t\tcase 'count':\n\t\t\t\t\t\treturn this.renderCount(value);\n\t\t\t\t\tcase 'actions':\n\t\t\t\t\t\treturn this.renderActions(alert);\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn this.renderText(value);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tgetFieldValue(alert, fieldPath) {\n\t\t\t\tif (!fieldPath || fieldPath === 'select' || fieldPath === 'actions') {\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\n\t\t\t\tconst parts = fieldPath.split('.');\n\t\t\t\tlet value = alert;\n\n\t\t\t\tfor (const part of parts) {\n\t\t\t\t\tif (value === null || value === undefined) return '';\n\t\t\t\t\tvalue = value[part];\n\t\t\t\t}\n\n\t\t\t\treturn value !== null && value !== undefined ? value : '';\n\t\t\t},\n\n\t\t\trenderText(value) {\n\t\t\t\tif (!value && value !== 0) return '<span class=\"text-gray-400 dark:text-gray-500\">-</span>';\n\t\t\t\tconst escaped = this.escapeHtml(String(value));\n\t\t\t\treturn `<div class=\"text-sm text-gray-900 dark:text-white truncate\" title=\"${escaped}\">${escaped}</div>`;\n\t\t\t},\n\n\t\t\trenderBadge(value, fieldPath) {\n\t\t\t\tif (!value && value !== 0) return '<span class=\"text-gray-400 dark:text-gray-500\">-</span>';\n\n\t\t\t\t// Extract actual value based on field type\n\t\t\t\tlet strValue;\n\t\t\t\tif (fieldPath === 'status') {\n\t\t\t\t\t// Status is an object with { state: \"firing|resolved|suppressed\" }\n\t\t\t\t\tif (typeof value === 'object' && value !== null && value.state) {\n\t\t\t\t\t\tstrValue = value.state === 'suppressed' ? 'silenced' : value.state;\n\t\t\t\t\t} else if (typeof value === 'string') {\n\t\t\t\t\t\tstrValue = value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstrValue = 'unknown';\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// For other fields, convert to string\n\t\t\t\t\tstrValue = String(value);\n\t\t\t\t}\n\n\t\t\t\tlet colorClass = 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200';\n\n\t\t\t\tif (fieldPath === 'severity') {\n\t\t\t\t\tconst colors = {\n\t\t\t\t\t\t'critical': 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200',\n\t\t\t\t\t\t'warning': 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-200',\n\t\t\t\t\t\t'info': 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200',\n\t\t\t\t\t};\n\t\t\t\t\tcolorClass = colors[strValue.toLowerCase()] || colorClass;\n\t\t\t\t} else if (fieldPath === 'status') {\n\t\t\t\t\tconst colors = {\n\t\t\t\t\t\t'firing': 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200',\n\t\t\t\t\t\t'resolved': 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200',\n\t\t\t\t\t\t'suppressed': 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200',\n\t\t\t\t\t\t'silenced': 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200',\n\t\t\t\t\t};\n\t\t\t\t\tcolorClass = colors[strValue.toLowerCase()] || colorClass;\n\t\t\t\t}\n\n\t\t\t\treturn `<span class=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${colorClass}\">${this.escapeHtml(strValue)}</span>`;\n\t\t\t},\n\n\t\t\trenderDuration(seconds) {\n\t\t\t\tif (!seconds || seconds < 0) return '<span class=\"text-gray-400 dark:text-gray-500\">-</span>';\n\n\t\t\t\tconst hours = Math.floor(seconds / 3600);\n\t\t\t\tconst minutes = Math.floor((seconds % 3600) / 60);\n\t\t\t\tconst secs = seconds % 60;\n\n\t\t\t\tlet result = '';\n\t\t\t\tif (hours > 0) result = `${hours}h ${minutes}m`;\n\t\t\t\telse if (minutes > 0) result = `${minutes}m ${secs}s`;\n\t\t\t\telse result = `${secs}s`;\n\n\t\t\t\treturn `<span class=\"text-sm text-gray-900 dark:text-white\">${result}</span>`;\n\t\t\t},\n\n\t\t\trenderTimestamp(timestamp) {\n\t\t\t\tif (!timestamp) return '<span class=\"text-gray-400 dark:text-gray-500\">-</span>';\n\n\t\t\t\ttry {\n\t\t\t\t\tconst date = new Date(timestamp);\n\t\t\t\t\tconst formatted = date.toLocaleString();\n\t\t\t\t\treturn `<span class=\"text-sm text-gray-900 dark:text-white\">${this.escapeHtml(formatted)}</span>`;\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn `<span class=\"text-sm text-gray-900 dark:text-white\">${this.escapeHtml(String(timestamp))}</span>`;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\trenderCount(count) {\n\t\t\t\tif (!count || count === 0) {\n\t\t\t\t\treturn '<span class=\"text-gray-400 dark:text-gray-500\">-</span>';\n\t\t\t\t}\n\t\t\t\treturn `<span class=\"inline-flex items-center text-sm text-gray-900 dark:text-white\">\n\t\t\t\t\t<svg class=\"w-4 h-4 mr-1 text-gray-400\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" fill=\"none\">\n\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 0 1 .865-.501 48.172 48.172 0 0 0 3.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z\" />\n\t\t\t\t\t</svg>\n\t\t\t\t\t${count}\n\t\t\t\t</span>`;\n\t\t\t},\n\n\t\t\trenderCheckbox(alert) {\n\t\t\t\tconst checked = this.selectedAlerts.includes(alert.fingerprint) ? 'checked' : '';\n\t\t\t\treturn `<input\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t${checked}\n\t\t\t\t\tonclick=\"event.stopPropagation(); window.dashboardInstance.toggleAlert('${alert.fingerprint}')\"\n\t\t\t\t\tclass=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded cursor-pointer\"\n\t\t\t\t>`;\n\t\t\t},\n\n\t\t\trenderActions(alert) {\n\t\t\t\tlet html = '<div class=\"flex items-center space-x-2\">';\n\n\t\t\t\tif (alert.isAcknowledged) {\n\t\t\t\t\thtml += `<div class=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200\">\n\t\t\t\t\t\t<svg class=\"w-3 h-3 mr-1\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" fill=\"none\">\n\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M4.5 12.75l6 6 9-13.5\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t\tACK\n\t\t\t\t\t</div>`;\n\t\t\t\t} else {\n\t\t\t\t\thtml += `<button\n\t\t\t\t\t\tonclick=\"event.stopPropagation(); window.dashboardInstance.acknowledgeAlert('${alert.fingerprint}')\"\n\t\t\t\t\t\tclass=\"text-gray-400 hover:text-green-500 transition-colors p-1 rounded\"\n\t\t\t\t\t\ttitle=\"Acknowledge Alert\">\n\t\t\t\t\t\t<svg class=\"w-4 h-4\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" fill=\"none\">\n\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M4.5 12.75l6 6 9-13.5\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</button>`;\n\t\t\t\t}\n\n\t\t\t\thtml += `<button\n\t\t\t\t\tonclick=\"event.stopPropagation(); window.dashboardInstance.silenceAlert('${alert.fingerprint}')\"\n\t\t\t\t\tclass=\"text-gray-400 hover:text-purple-500 transition-colors p-1 rounded\"\n\t\t\t\t\ttitle=\"Silence Alert\">\n\t\t\t\t\t<svg class=\"w-4 h-4\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" fill=\"none\">\n\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M17.25 9.75 19.5 12m0 0 2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6 4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.59-.79-1.59-1.78V9.51c0-.88.79-1.59 1.78-1.59h1.78Z\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t</button>`;\n\n\t\t\t\thtml += '</div>';\n\t\t\t\treturn html;\n\t\t\t},\n\n\t\t\tescapeHtml(text) {\n\t\t\t\tconst str = String(text);\n\t\t\t\tlet result = '';\n\t\t\t\tfor (let i = 0; i < str.length; i++) {\n\t\t\t\t\tconst char = str[i];\n\t\t\t\t\tif (char === '&') result += '&amp;';\n\t\t\t\t\telse if (char === '<') result += '&lt;';\n\t\t\t\t\telse if (char === '>') result += '&gt;';\n\t\t\t\t\telse if (char === '\"') result += '&quot;';\n\t\t\t\t\telse if (char === \"'\") result += '&#039;';\n\t\t\t\t\telse result += char;\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tsortByColumn(column) {\n\t\t\t\tif (!column.sortable) return;\n\n\t\t\t\tconst field = column.field_path;\n\n\t\t\t\t// Toggle direction or set new field\n\t\t\t\tif (this.sortField === field) {\n\t\t\t\t\tthis.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';\n\t\t\t\t} else {\n\t\t\t\t\tthis.sortField = field;\n\t\t\t\t\tthis.sortDirection = 'asc';\n\t\t\t\t}\n\n\t\t\t\tconsole.log('Sorting by:', field, this.sortDirection);\n\t\t\t\tthis.applyFilters();\n\t\t\t},\n\n\t\t\tstartColumnResize(event, column) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\n\t\t\t\tconst self = this;\n\t\t\t\tself.resizingColumn = column;\n\t\t\t\tself.resizeStartX = event.clientX;\n\t\t\t\tself.resizeStartWidth = column.width;\n\n\t\t\t\tconst handleMove = (e) => {\n\t\t\t\t\tif (!self.resizingColumn) return;\n\t\t\t\t\tconst delta = e.clientX - self.resizeStartX;\n\t\t\t\t\tconst newWidth = Math.max(50, Math.min(800, self.resizeStartWidth + delta));\n\t\t\t\t\tself.resizingColumn.width = newWidth;\n\t\t\t\t};\n\n\t\t\t\tconst handleEnd = () => {\n\t\t\t\t\tif (self.resizingColumn) {\n\t\t\t\t\t\tconsole.log('Column resized:', self.resizingColumn.id, 'to', self.resizingColumn.width);\n\t\t\t\t\t\tself.resizingColumn = null;\n\t\t\t\t\t}\n\t\t\t\t\tdocument.removeEventListener('mousemove', handleMove);\n\t\t\t\t\tdocument.removeEventListener('mouseup', handleEnd);\n\t\t\t\t};\n\n\t\t\t\tdocument.addEventListener('mousemove', handleMove);\n\t\t\t\tdocument.addEventListener('mouseup', handleEnd);\n\t\t\t},\n\n\t\t\t// =========================================\n\t\t\t// Column Management State\n\t\t\t// =========================================\n\t\t\tshowAddColumnDialog: false,\n\t\t\teditingColumn: null,\n\t\t\tdraggingColumn: null,\n\t\t\tnewColumnConfig: {\n\t\t\t\tlabel: '',\n\t\t\t\tfield_type: 'label',\n\t\t\t\tfield_name: '',\n\t\t\t\tformatter: 'text',\n\t\t\t\twidth: 200\n\t\t\t},\n\n\t\t\t// =========================================\n\t\t\t// Column Management Functions\n\t\t\t// =========================================\n\n\t\t\tresetNewColumnConfig() {\n\t\t\t\tthis.newColumnConfig = {\n\t\t\t\t\tlabel: '',\n\t\t\t\t\tfield_type: 'label',\n\t\t\t\t\tfield_name: '',\n\t\t\t\t\tformatter: 'text',\n\t\t\t\t\twidth: 200\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tupdateFieldPathPlaceholder() {\n\t\t\t\t// Helper to update placeholder based on field type\n\t\t\t\t// This is called from the UI when field_type changes\n\t\t\t},\n\n\t\t\tresetColumnsToDefaults() {\n\t\t\t\tif (confirm('Reset all columns to default configuration? This will remove all custom columns.')) {\n\t\t\t\t\tthis.columns = this.getDefaultColumns();\n\t\t\t\t\tthis.updateVisibleColumns();\n\t\t\t\t\tconsole.log('Columns reset to defaults');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tasync saveUserColumnPreferences() {\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await fetch('/api/v1/dashboard/column-preferences', {\n\t\t\t\t\t\tmethod: 'PUT',\n\t\t\t\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\t\t\t\tcredentials: 'include',\n\t\t\t\t\t\tbody: JSON.stringify({ column_configs: this.columns })\n\t\t\t\t\t});\n\n\t\t\t\t\tif (this.handleAuthError(response)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!response.ok) {\n\t\t\t\t\t\tconst errorData = await response.json();\n\t\t\t\t\t\tconsole.error('Failed to save column preferences:', errorData);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.log('Column preferences saved successfully');\n\t\t\t\t\treturn true;\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('Error saving column preferences:', error);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tasync loadUserColumnPreferences() {\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await fetch('/api/v1/dashboard/column-preferences', {\n\t\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\t\tcredentials: 'include'\n\t\t\t\t\t});\n\n\t\t\t\t\tif (this.handleAuthError(response)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!response.ok) {\n\t\t\t\t\t\t// User preferences don't exist yet - that's okay, use defaults\n\t\t\t\t\t\tconsole.log('No user column preferences found, using defaults');\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst data = await response.json();\n\t\t\t\t\tif (data.column_configs && Array.isArray(data.column_configs) && data.column_configs.length > 0) {\n\t\t\t\t\t\tthis.columns = data.column_configs;\n\t\t\t\t\t\tthis.updateVisibleColumns();\n\t\t\t\t\t\tconsole.log('User column preferences loaded successfully');\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('Error loading column preferences:', error);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Drag and drop handlers\n\t\t\tstartColumnDrag(event, column, index) {\n\t\t\t\tif (column.locked) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.draggingColumn = column.id;\n\t\t\t\tevent.dataTransfer.effectAllowed = 'move';\n\t\t\t\tevent.dataTransfer.setData('text/html', event.target.innerHTML);\n\t\t\t\tevent.dataTransfer.setData('columnIndex', index);\n\t\t\t},\n\n\t\t\tendColumnDrag(event) {\n\t\t\t\tthis.draggingColumn = null;\n\t\t\t},\n\n\t\t\thandleColumnDragOver(event, targetIndex) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.dataTransfer.dropEffect = 'move';\n\t\t\t},\n\n\t\t\thandleColumnDrop(event, targetIndex) {\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tconst sourceIndex = parseInt(event.dataTransfer.getData('columnIndex'));\n\t\t\t\tif (sourceIndex === targetIndex) return;\n\n\t\t\t\t// Don't allow moving locked columns\n\t\t\t\tif (this.columns[sourceIndex].locked) return;\n\n\t\t\t\t// Reorder columns\n\t\t\t\tconst newColumns = [...this.columns];\n\t\t\t\tconst [movedColumn] = newColumns.splice(sourceIndex, 1);\n\t\t\t\tnewColumns.splice(targetIndex, 0, movedColumn);\n\n\t\t\t\t// Update order property\n\t\t\t\tnewColumns.forEach((col, idx) => {\n\t\t\t\t\tcol.order = idx;\n\t\t\t\t});\n\n\t\t\t\tthis.columns = newColumns;\n\t\t\t\tthis.updateVisibleColumns();\n\t\t\t\tthis.draggingColumn = null;\n\n\t\t\t\tconsole.log('Column reordered:', movedColumn.label, 'from', sourceIndex, 'to', targetIndex);\n\t\t\t},\n\n\t\t\teditColumn(column) {\n\t\t\t\tthis.editingColumn = column;\n\t\t\t\tthis.newColumnConfig = {\n\t\t\t\t\tlabel: column.label,\n\t\t\t\t\tfield_type: column.field_type,\n\t\t\t\t\tfield_name: column.field_path.split('.').pop(), // Extract field name from path\n\t\t\t\t\tformatter: column.formatter,\n\t\t\t\t\twidth: column.width\n\t\t\t\t};\n\t\t\t\tthis.showAddColumnDialog = true;\n\t\t\t},\n\n\t\t\tdeleteColumn(columnId) {\n\t\t\t\tconst column = this.columns.find(col => col.id === columnId);\n\t\t\t\tconst columnName = column ? column.label : 'this column';\n\t\t\t\tif (confirm(`Delete \"${columnName}\"?\\n\\nThis action cannot be undone. The column will be removed from your current configuration.`)) {\n\t\t\t\t\tthis.columns = this.columns.filter(col => col.id !== columnId);\n\t\t\t\t\tthis.updateVisibleColumns();\n\t\t\t\t\tconsole.log('Column deleted:', columnId);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsaveCustomColumn() {\n\t\t\t\tconst config = this.newColumnConfig;\n\n\t\t\t\t// Validation with improved error messages\n\t\t\t\tif (!config.label) {\n\t\t\t\t\talert('Column Label Required\\n\\nPlease enter a display name for your custom column (e.g., \"Environment\", \"Pod Name\").');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!config.field_name) {\n\t\t\t\t\talert('Field Name Required\\n\\nPlease enter the field name without prefix.\\n\\nExamples:\\n• For labels: \"environment\", \"team\", \"cluster\"\\n• For annotations: \"runbook_url\", \"dashboard\"');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (config.width < 50 || config.width > 800) {\n\t\t\t\t\talert(`Invalid Column Width\\n\\nWidth must be between 50 and 800 pixels.\\nYou entered: ${config.width}px\\n\\nRecommended widths:\\n• Short text: 100-150px\\n• Medium text: 200-300px\\n• Long text: 400-600px`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Build field path\n\t\t\t\tconst fieldPath = config.field_type === 'label'\n\t\t\t\t\t? `labels.${config.field_name}`\n\t\t\t\t\t: config.field_type === 'annotation'\n\t\t\t\t\t? `annotations.${config.field_name}`\n\t\t\t\t\t: config.field_name;\n\n\t\t\t\tif (this.editingColumn) {\n\t\t\t\t\t// Update existing column\n\t\t\t\t\tconst index = this.columns.findIndex(col => col.id === this.editingColumn.id);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\tthis.columns[index] = {\n\t\t\t\t\t\t\t...this.columns[index],\n\t\t\t\t\t\t\tlabel: config.label,\n\t\t\t\t\t\t\tfield_type: config.field_type,\n\t\t\t\t\t\t\tfield_path: fieldPath,\n\t\t\t\t\t\t\tformatter: config.formatter,\n\t\t\t\t\t\t\twidth: config.width\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tconsole.log('Column updated:', this.editingColumn.id);\n\t\t\t\t} else {\n\t\t\t\t\t// Add new column\n\t\t\t\t\tconst columnId = `col_custom_${config.field_type}_${config.field_name.replace(/[^a-z0-9]/gi, '_').toLowerCase()}`;\n\n\t\t\t\t\t// Check for duplicate ID\n\t\t\t\t\tif (this.columns.some(col => col.id === columnId)) {\n\t\t\t\t\t\talert(`Duplicate Column\\n\\nA column for \"${config.field_type}.${config.field_name}\" already exists.\\n\\nPlease use a different field name or edit the existing column instead.`);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst newColumn = {\n\t\t\t\t\t\tid: columnId,\n\t\t\t\t\t\tlabel: config.label,\n\t\t\t\t\t\tfield_type: config.field_type,\n\t\t\t\t\t\tfield_path: fieldPath,\n\t\t\t\t\t\tformatter: config.formatter,\n\t\t\t\t\t\twidth: config.width,\n\t\t\t\t\t\tsortable: config.formatter === 'text' || config.formatter === 'badge',\n\t\t\t\t\t\tvisible: true,\n\t\t\t\t\t\torder: this.columns.length,\n\t\t\t\t\t\tresizable: true,\n\t\t\t\t\t\tlocked: false\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.columns.push(newColumn);\n\t\t\t\t\tconsole.log('Column added:', columnId);\n\t\t\t\t}\n\n\t\t\t\tthis.updateVisibleColumns();\n\t\t\t\tthis.showAddColumnDialog = false;\n\t\t\t\tthis.editingColumn = null;\n\t\t\t\tthis.resetNewColumnConfig();\n\t\t\t}\n\t\t};\n\n\t\t// Global function to handle logout response\n\t\twindow.handleLogoutResponse = function(event) {\n\t\t\ttry {\n\t\t\t\tconst xhr = event.detail.xhr;\n\t\t\t\t\n\t\t\t\tif (xhr.status === 200) {\n\t\t\t\t\t// Successful logout\n\t\t\t\t\tconst response = JSON.parse(xhr.responseText);\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t// Clear any cached user data\n\t\t\t\t\t\tlocalStorage.removeItem('dashboardSettings');\n\t\t\t\t\t\tlocalStorage.removeItem('dashboardColumnWidths');\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Redirect to login page after a brief delay\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\twindow.location.href = '/login';\n\t\t\t\t\t\t}, 500);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Logout failed\n\t\t\t\t\t\tconsole.error('Logout Failed')\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// HTTP error status\n\t\t\t\t\tconsole.log('HTTP error status')\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error handling logout response:', error);\n\t\t\t\t// Fallback: redirect to login anyway in case of error\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\twindow.location.href = '/login';\n\t\t\t\t}, 1000);\n\t\t\t}\n\t\t};\n\t</script>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
